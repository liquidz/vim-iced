All notable changes to this project will be documented in this file. This change log follows the conventions of http://keepachangelog.com/[keepachangelog.com].

== Unreleased (dev)

== 3.8.6 (2022-04-12)
// {{{
=== Changed
* Bumped jet to 0.1.1.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/401[#401]: Fixed `IcedJackIn` to wait launching nREPL server correctly.
** When `.nrepl-port` file already exists, `IcedJackIn` had a possibility to connect to the port written in the old `.nrepl-port` file.
// }}}

== 3.8.5 (2022-04-06)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/396[#396]: Added `g:iced#refactor#insert_newline_after_require` option.
** With vim-iced v3.7.3 or later, `:IcedCleanNs` place a newline after the `:require` and `:import` tokens by default. (This behavior changed by https://github.com/clojure-emacs/refactor-nrepl[refactor-nrepl])
** If you don't like this behavior, please set this option to be `v:false`.

=== Changed
* Bumped iced-nrepl to 1.2.10.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/396[#396]: Fixed `E688` error when executing `IcedAddNs` command.
// }}}

== 3.8.4 (2022-04-02)
// {{{
=== Changed
* https://github.com/liquidz/iced-nrepl/issues/19[iced-nrepl#19] https://github.com/liquidz/iced-nrepl/issues/21[iced-nrepl#21]: Bumped iced-nrepl to 1.2.9.
* Bumped joker to 1.0.0.

=== Fixed
* Fixed `ns_required` hook to work correctly.
* https://github.com/liquidz/vim-iced/issues/393[#393]: Fixed not to fold texts in floating window for neovim.
// }}}

== 3.8.3 (2022-03-20)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/389[#389]: Added `g:iced#eval#popup_highlight` option to change the highlight setting for popup to display evaluated result.
** https://liquidz.github.io/vim-iced/vim-iced.html#g%3Aiced%23eval%23popup_highlight

=== Changed
* https://github.com/liquidz/vim-iced/pull/391[#391]: Added document for disabling paredit.
** https://liquidz.github.io/vim-iced/#_disabling_paredit
* Bumped refactor-nrepl to 3.5.2.
// }}}

== 3.8.2 (2022-03-06)
// {{{
=== Changed
* Bumped refactor-nrepl to 3.4.0.

=== Fixed
* Fixed to work on nREPL without iced-nrepl.
** Fixed not to occur errors, especially when evaluating ns forms.
// }}}

== 3.8.1 (2022-02-27)
// {{{
=== Added
* Added support fro external selectors.

=== Changed
* Bumped cider-nrepl to 0.28.3.
// }}}

== 3.8.0 (2022-02-17)
// {{{
=== Added
* Added feature to store evaluated result to numbered registers.
** Like vim's behavior, iced shifts the previous result of register 1 into register 2, 2 into 3, and so forth.
* https://github.com/liquidz/vim-iced/issues/383[#383]: Added support for jumping protocol implementations.
** This feature requires clj-kondo v2022.02.09 or later.

=== Changed
* Bumped cider-nrepl to 0.28.2.
* Bumped refactor-nrepl to 3.3.2.
* Bumped zprint to 1.2.2.
// }}}

== 3.7.5 (2022-01-12)
// {{{
=== Changed
* Refactored vim virtualtext component to use text properties.
** https://vim-jp.org/vimdoc-en/textprop.html

=== Fixed
* https://github.com/liquidz/vim-iced/issues/370[#370]: Fixed popup window not to get stuck for files with no extension.
// }}}

== 3.7.4 (2022-01-09)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/issues/225[#225] https://github.com/liquidz/vim-iced/issues/372[#372]: Updated to use `ns` optional parameter in evaluating code.

=== Fixed
* Fixed to open zip file correctly on v8.2.3606 or later.
// }}}

== 3.7.3 (2021-12-29)
// {{{
=== Changed
* Bumped nrepl to 0.9.0.
* https://github.com/liquidz/vim-iced/issues/374[#374]: Bumped refactor-nrepl to 3.1.0.
* https://github.com/liquidz/vim-iced/issues/359[#359]: Bumped cider-nrepl to 0.27.4.
* Bumped joker to 0.18.0.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/376[#376]: Improved evaluation performance for large values in Neovim.
// }}}

== 3.7.2 (2021-12-18)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced-coc-source/issues/4[vim-iced-coc-source#4]: Updated to change stdout buffer's buftype lazily.
** coc.nvim https://github.com/neoclide/coc.nvim/blob/master/history.md#2018-08-16[does not work in buffers which buftype is 'nofile'], and to avoid this limitation, change stdout buffer's buftype lazily.
***
* Fixed error handling when extracting a var.
// }}}

== 3.7.1 (2021-12-12)
// {{{
=== Changed
* Bumped piggieback to 0.5.3.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/370[#370]: Fixed not to stuck popup with Neovim.
* Fixed completion function for nREPL to return correct value.
* Fixed to work with vim-lsp.
// }}}

== 3.7.0 (2021-10-03)
// {{{
=== Added
* Added support for ClojureScript REPL like https://github.com/borkdude/nbb[borkdude/nbb].
* Added `nbb` as a target for `:IcedInstantConnect` command.
** Now you can connect nbb REPL quickly via executing `:IcedInstantConnect nbb`.
// }}}

== 3.6.3 (2021-09-26)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/366[#366]: Added `g:iced#buffer#stdout#size` option.
// }}}

== 3.6.2 (2021-09-04)
// {{{
=== Fixed
* Fixed a unexpected exceptions during clojure.test errors.
// }}}

== 3.6.1 (2021-08-29)
// {{{
=== Changed
* Updated test result parsing process not to fetch namespace path if not needed.
* Bumped joker to 0.17.2.
* Bumped zprint to 1.2.01.
// }}}

== 3.6.0 (2021-08-18)
// {{{
=== Added
* Added support for ClojureScript test integration on plain nREPL with following commands.
** `:IcedTestUnderCursor`, `:IcedTestNs`
** `:IcedTestAll` is not supported for now.
// }}}

== 3.5.7 (2021-08-04)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/issues/359[#359]: Downgraded cider-nrepl to 0.25.11 for now.
** With cider-nrepl 0.26.0, logs from `clojure.tools.logging` does not appear on REPL which is started via Clojure CLI.
// }}}

== 3.5.6 (2021-08-03)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/issues/357[#357]: Updated to add line numbers to testing error output.
* Bumped iced-nrepl to 1.2.8.
// }}}

== 3.5.5 (2021-07-19)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/353[#353]: Fixed to trim too long virtual texts to show within a window for Vim.
// }}}

== 3.5.4 (2021-07-17)
// {{{
=== Fixed
* Fixed to close document popup when the cursor is moved in insertion mode for Neovim.
* Fixed to work with Neovim 0.4.4.
** v3.5.3 broke backward compatibility.
* Fixed popup position with Neovim.
* Fixed popup component not to show same group, such as document and source, at the same time.
// }}}

== 3.5.3 (2021-07-11)
// {{{
=== Fixed
* Fixed to refer vars which ends with quote correctly.
** Some commands such as `IcedDefJump` and `IcedDocumentOpen` will correctly work with vars ending with quotes.
* Fixed `IcedTestUnderCursor` command to fall back to manipulation with nREPL when test vars are not found in clj-kondo analysis data.
** When test vars are not found in clj-kondo analysis data, the test process had been exited silently until now.
* Fixed native image formatter not to add unnecessary newlines with Neovim.
// }}}

== 3.5.2 (2021-07-04)
// {{{
=== Changed
* Updated document page for `iced` command to clarify project priorities.
** https://liquidz.github.io/vim-iced/#iced_supports

=== Fixed
* Fixed babashka installer to work.
* Fixed session management to work https://github.com/liquidz/vim-iced-multi-session[vim-iced-multi-session] with Neovim.
// }}}

== 3.5.1 (2021-06-26)
// {{{
=== Added
* Added `IcedJavaDocument` command
** https://liquidz.github.io/vim-iced/vim-iced.html#%3AIcedJavaDocument

=== Changed
* Bumped iced-nrepl to 1.2.7.

=== Fixed
* Fixed `IcedAddMissing` command to work with fully qualified keywords.
// }}}

== 3.5.0 (2021-06-15)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/344[#344] Added `g:iced#nrepl#connect#prefer` option.

=== Changed
* https://github.com/liquidz/vim-iced/issues/343[#343] Updated `IcedDefJump` to support more accurate jumping to keyword definition.

=== Fixed
* Fixed clj-kondo sqlite3 component to avoid JSON decode error.
// }}}

== 3.4.1 (2021-05-28)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/pull/292[#292]: Updated `IcedTestNs` to reload ns before running tests to match the `IcedTestUnderCursor` 's behavior.
* Updated `IcedBrowseRelatedNamespace` command to support clj-kondo component.
** With clj-kondo and sqlite3, this update improve the performance.
* Bumped iced-nrepl to 1.2.6.

=== Fixed
* Fixed to reflect changes for ns form correctly in shadow-cljs.
** E.g.  When you use `IcedAddNs` or `IcedAddMissing`, it wasn't reflected and you were required to re-evaluate the ns form until now.  But now you can use added ns aliases immediately.
// }}}

== 3.4.0 (2021-05-16)
// {{{
=== Added
* Added `connecting` hook.
** https://liquidz.github.io/vim-iced/#hook

=== Changed
* Bump iced-nrepl to 1.2.5.

=== Fixed
* Fixed shadow-cljs initialization process not to be timed out.
// }}}

== 3.3.0 (2021-05-09)
// {{{
=== Added
* Added `IcedFormatSync` and `IcedFormatSyncAll` commands.
** Added help for formatting on save.
*** https://liquidz.github.io/vim-iced/#format_on_writing_files
* Added `IcedRefresh`, `IcedRefreshAll` and `IcedRefreshClear` commands.
** Updated documents for reloaded workflows.
*** https://liquidz.github.io/vim-iced/#_reloaded_workflows

=== Changed
* Bumped zprint to 1.1.2.
// }}}

== 3.2.0 (2021-04-26)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/pull/333[#333]: Updated `IcedEvalOuterTopList` to select topmost form that is not a comment.
* Bumped joker to 0.17.1.
// }}}

== 3.1.3 (2021-04-24)
// {{{
=== Changed
* Bumped cider-nrepl to 0.26.0.
* Bumped iced-nrepl to 1.2.4.
* Bumped joker to 0.17.0.

=== Fixed
* Fixed skeleton feature to also apply for empty files.
* Fixed to disconnect if the initialization fails when connecting.
** To avoid halfway states.
// }}}

== 3.1.2 (2021-04-10)
// {{{
=== Changed

* Bumped iced-nrepl to 1.2.3.
* Bumped jet installer to 0.0.15.

=== Fixed

* Fixed `IcedBrowseReferences` to work with qualified keywords correctly.
** Especially keywords like `::foo` or `::foo/bar`
// }}}

== 3.1.1 (2021-04-04)
// {{{
=== Changed

* https://github.com/liquidz/vim-iced/issues/328[#328]: Update `IcedDefJump` command to enable specifying how to open the new buffer.
** `:edit` command is used by default, but you can specify `:tabedit`, `:vsplit` or etc.
* Bumped cljstyle installer to 0.15.0.
* Bumped jet installer to 0.0.14.

=== Fixed

* https://github.com/liquidz/vim-iced/issues/327[#327]: Fixed not to be affected by `iskeyword` user settings.
// }}}

== 3.1.0 (2021-03-26)
// {{{
=== Added
* Added `connect_prepared` hook.
// }}}

== 3.0.3 (2021-03-21)
// {{{
=== Fixed
* Fixed `E119: Not enough arguments for function` about timer component.
// }}}

== 3.0.2 (2021-03-20)
// {{{
=== Changed
* Changed one-line document to use `timer` feature instead of `CursorHold`/`CursorHoldI` auto command.
** Now you can adjust delay time for displaying one-line document with `g:iced#nrepl#auto#document_delay` option.
* Bumped iced-nrepl to 1.2.2.
* Bumped joker to 0.16.0.
// }}}

== 3.0.1 (2021-03-13)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/318[#318]: Added `g:iced#selector#search_order` to be able to specify selector searching order.
// }}}

== 3.0.0 (2021-03-06)
// {{{
=== Added
* Added support SQLite3 in clj-kondo component for performance.
** When you have `jq` and `sqlite3` command, clj-kondo component will store analyzed result into SQLite database.
*** The performance for finding references and local definitions will improve dramatically.
* Added `IcedYankNsName` command.
* Added support for referencing keywords to `:IcedBrowseReferences`.
** Required clj-kondo `v2021.02.13` or later, and required enabling `g:iced_enable_clj_kondo_analysis` and `g:iced_enable_clj_kondo_local_analysis`.

=== Changed
* Bumped refactor-nrepl to 2.5.1.
* Bumped iced-nrepl to 1.2.1.
* Update `IcedAddMissing` command to support to add missing classes.
* (Breaking) Changed default value for `g:iced_enable_enhanced_definition_extraction` option to `v:false`.
** `v:true` will lead taking time for `IcedSourceShow` by default.
* (Breaking) Changed default value for `g:iced#repl#babashka_repl_type` option to `'nrepl'`.

=== Fixed
* Fixed clj-kondo component to be able to handle quoted symbols.

=== Removed
* (Breaking) Removed `:IcedBrowseVarReferences` and `:IcedBrowseVarDependencies` commands.
** `:IcedBrowseReferences` / `:IcedBrowseDependencies` behaves as same as `:IcedBrowseVarReferences` and `:IcedBrowseVarDependencies` instead.
*** Thus original `:IcedBrowseReferences` and `:IcedBrowseDependencies` behaviors are removed.
// }}}

== 2.7.6 (2021-02-11)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/311[#311]: Supported newer main invocation for Clojure CLI.
* Added `g:iced#navigate#prefer_local_jump` option.
** Change the behavior of `:IcedDefJump` to prefer local jumping.

=== Changed
* Changed `:IcedDefJump` not to prefer local jumping.
// }}}

== 2.7.5 (2021-01-24)
// {{{
=== Changed
* Bumped cider-nrepl to 0.25.7

=== Fixed
* https://github.com/liquidz/vim-iced/issues/309[#309]: Fixed popup window to work `wrap` correctly.
// }}}

== 2.7.4 (2021-01-21)
// {{{
=== Added
* Added `g:iced_enable_clj_kondo_local_analysis` option.
** Enabling clj-kondo's local analysis (required `v2021.01.20` or later)

=== Changed
* Update `:IcedDefJump` to support jumping to local vars.
** Required enabling `g:iced_enable_clj_kondo_local_analysis` option.
* Bump zprint to 1.1.1.
// }}}

== 2.7.3 (2021-01-18)
// {{{
=== Added
* Added `evaluated` hook type.
* Added `iced_eval_and_comment` operator to evaluate code and add the result as a comment in current end of line.
** `:h <Plug>(iced_eval_and_comment)`

=== Changed
* Changed browsing references/dependencies to use https://vim-jp.org/vimdoc-en/quickfix.html#location-list[location list] instead of quickfix list.
* Bump zprint to 1.1.0.
// }}}

== 2.7.2 (2021-01-16)
// {{{
=== Added
* Added `eval_prepared` hook type.

=== Changed

* Bumped cider-nrepl to 0.25.6
* Bumped iced-nrepl to 1.1.2
* Updated vital.vim modules to be latest.
* Changed stdout buffer to set `nowrap` option.
* Changed stdout buffer not to scroll bottom when you are in the stdout buffer.

=== Fixed

* Fixed not to switch clj/cljs session for shadow-cljs automatically.
* Fixed Vim's virtualtext to fit the current window size.
// }}}

== 2.7.1 (2021-01-01)

// {{{
=== Changed

* Updated the ClojureDocs export EDN URL.
** See https://github.com/clojure-emacs/clojuredocs-export-edn/issues/3[clojuredocs-export-edn#3] for more information.
// }}}

== 2.7.0 (2020-12-31)

// {{{
=== Added

* https://github.com/liquidz/vim-iced/issues/300[#300]: Added notification feature to display standard outputs on popup.
// }}}

== 2.6.1 (2020-12-12)
// {{{
=== Changed

* https://github.com/liquidz/vim-iced/issues/298[#298]: Updated `<Plug>(iced_eval)` operator to support yanking.
** https://liquidz.github.io/vim-iced/#evaluation_yank

=== Fixed

* https://github.com/liquidz/vim-iced/issues/296[#296]: Fixed instant connecting babashka to work after disconnecting in Neovim.
// }}}

== 2.6.0 (2020-11-29)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/291[#291]: Added `:IcedStdoutBufferToggle` command.

=== Changed
* Bumped cider-nrepl to 0.25.5.
* Bumped iced-nrepl to 1.1.1.
* Changed evaluating forms not to set quickfix.
* Changed the default mapping for `<Leader>ss` from `:IcedStdoutBufferOpen` to `:IcedStdoutBufferToggle`.
// }}}

== 2.5.1 (2020-11-18)
// {{{
=== Changed

* Bump cljstyle to 0.14.0.
* Bump zprint to 1.0.2.
// }}}

== 2.5.0 (2020-11-07)
// {{{
=== Added

* Added `IcedDeleteTapped` command.

=== Changed

* Bumped nREPL to 0.8.3.
* Bumped iced-nrepl to 1.1.0.
* Bumped piggieback to 0.5.2.
* Updated `IcedBrowseReference` to support `defmulti` and `defmethod`.

=== Fixed

* Fixed native-image formatter to work even if stderr is output.
** Checking if the exit code is `0`.
// }}}

== 2.4.0 (2020-10-19)
// {{{
=== Added

* https://github.com/liquidz/vim-iced/issues/275[#275] Added support for jumping to qualified keyword.
* https://github.com/liquidz/vim-iced/issues/274[#274] Added support for shadow-cljs in `iced` command.
* https://github.com/liquidz/vim-iced/issues/276[#276] Added clj-kondo static analysis support to `UseCaseOpen`.

=== Changed

* Bumped nREPL to 0.8.2.
* Bumped cider-nrepl to 0.25.4.
* Bumped iced-nrepl to 1.0.6.

=== Fixed

* https://github.com/liquidz/vim-iced/issues/277[#277] Fixed parentheses in comments not to break code finding.
* https://github.com/liquidz/vim-iced/issues/276[#276] Fixed not to timeout while using `IcedUseCaseOpen`.
// }}}

== 2.3.2 (2020-10-07)
// {{{
=== Added
* Added clj-kondo analysis support to testing under cursor.
** When the var under the cursor is not a test, use clj-kondo's analysis to find tests referring to this var.

=== Changed
* Updated jumping to definition to support clj-kondo analysis.
* Updated hooks to run multiple definitions at a time.
* Bumped joker to 0.15.7.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/271[#271]: Fixed `IcedInstantConnect` and `IcedJackIn` to work correctly.
// }}}

== 2.3.1 (2020-09-23)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/269[#269]: Fixed to work even if `clipboard=unnamedplus` is set.
// }}}

== 2.3.0 (2020-09-22)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/261[#261]: Added `:IcedRenameSymbol` command.
* https://github.com/liquidz/vim-iced/issues/265[#265]: Added `g:iced#buffer#document#mods` option.

=== Changed
* Bump zprint to 1.0.1.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/264[#264]: Fixed command palette to show command messages correctly.
// }}}

== 2.2.0 (2020-09-13)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/207[#207]: Added support for `completions` op in nREPL 0.8.
* https://github.com/liquidz/vim-iced/issues/247[#247]: Added support to use clj-kondo analysis.
** Added `g:iced_enable_clj_kondo_analysis` option.
** Added `g:iced_cache_directory` option.

=== Changed
* Bumped nREPL to `0.8.1`.
* Bumped iced-nrepl to `1.0.5`.
* Update command palette to be able to select commands which arguments.
// }}}

== 2.1.9 (2020-08-30)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/250[#250], https://github.com/liquidz/vim-iced/issues/253[#253]: Fixed figwheel-main to start ClojureScript REPL correctly.
// }}}

== 2.1.8 (2020-08-24)
// {{{
=== Changed
* Bump jet to 0.0.13.

=== Fixed
* Fixed to avoid `Press ENTER` message on evaluating code especially when `laststatus` is `0`.
// }}}

== 2.1.7 (2020-08-21)
// {{{
=== Changed
* Updated quickfix list to be able to trace histories.
** Now you can use https://vim-jp.org/vimdoc-en/quickfix.html#:colder[:colder] and https://vim-jp.org/vimdoc-en/quickfix.html#:cnewer[:cnewer] commands.
* Bumped kaocha to `1.0.669`.
* Bumped kaocha-nrepl to `1.0.3`.

=== Fixed
* Fixed not to show extra message on starting ClojureScript REPL.
// }}}

== 2.1.6 (2020-08-19)
// {{{
=== Changed
* Bumped kaocha to `1.0.663`.
* Bumped kaocha-nrepl to `1.0.2`.

=== Fixed
* Fixed not to throw error on evaluating the code where there is nothing.
// }}}

== 2.1.5 (2020-08-16)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/239[#239]: Fixed to initialize default formatter.
// }}}

== 2.1.4 (2020-08-15)
// {{{
=== Changed
* Bumped piggieback to 0.5.1.
* Changed to be able to use native-image formatters even when not connected.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/239[#239]: Fixed to be able to format the top level map.
** E.g. `deps.edn` file could not be formattable until now.
* Fixed validation for `shadow-cljs.edn` to work correctly.
** A bug from ver 2.1.2.
* Fixed `bufenter` autocmd to work with https://github.com/babashka/babashka.nrepl[babashka.nrepl].
// }}}

== 2.1.3 (2020-08-07)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/242[#242]: Added `g:iced#nrepl#skip_evaluation_when_buffer_size_is_exceeded` option to avoid freezing vim/nvim when too large values are returned from nREPL.

=== Changed
* Bumped joker to 0.15.6.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/242[#242]: Fixed to warn vim/nvim when too large values are returned from nREPL.
// }}}

== 2.1.2 (2020-08-01)
// {{{
=== Changed
* Bumped cider-nrepl to 0.25.3.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/121[#121]: Added a option to use https://github.com/borkdude/babashka[Babashka] to detect the use of ClojureScript.
** c.f. https://liquidz.github.io/vim-iced/#iced_usage
// }}}

== 2.1.1 (2020-07-12)
// {{{
=== Changed
* Bump iced-nrepl to 1.0.3.
** Fixed https://github.com/liquidz/vim-iced-fern-debugger[vim-iced-fern-debugger]'s issue: https://github.com/liquidz/vim-iced-fern-debugger/issues/1[#1], https://github.com/liquidz/vim-iced-fern-debugger/issues/2[#2]
// }}}

== 2.1.0 (2020-07-11)
// {{{
=== Added
* Added `:IcedStopSideloader` command.
* https://github.com/liquidz/vim-iced/issues/104[#104]: Added support for http://tonsky.me/blog/clojurefmt/[Tonsky's formatting rule].
** https://liquidz.github.io/vim-iced/#customizing_tonsky_formatting_rule

=== Changed
* Bump iced-nrepl to 1.0.3.
* Bump kaocha-nrepl to 1.0.1.

=== Fixed
* Fixed `:IcedUndef` command to handle not-found error.

=== Removed
* (Breaking) Removed `:IcedToggleSideloaderLookup` command.
** Please use `:IcedStopSideloader` command instead.
// }}}

== 2.0.1 (2020-07-04)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/229[#229]: Added `g:iced_default_key_mapping_leader` option to be able to change `<Leader>` in default key mappings.

=== Fixed
* Fixed test integration to show error message if error context does not exist.
// }}}

== 2.0.0 (2020-06-28)
// {{{
=== Added
* Added support for test integration on plain nREPL with following commands.
** This functionality was sponsored by https://www.clojuriststogether.org[Clojurists Together] as a part of their "Summer of Bugs" program.
** `:IcedTestUnderCursor`, `:IcedTestNs`, `:IcedTestAll`
** Now you can run tests on https://github.com/borkdude/babashka/blob/master/doc/repl.md#nrepl[Babashka]!
* Added `IcedUnaliasNs` command.
* Added `IcedUpdateTool` command.
* Added https://github.com/candid82/joker[joker] as a code formatter.

=== Fixed
* Fixed to be able to get var from quoated symbols.
* Fixed to be able to detect the namespace name in `in-ns` form.
* Fixed to reset supported ops when reconnecting.
* Fixed not to display extra messages on starting shadow-cljs REPL.

=== Removed
* https://github.com/liquidz/vim-iced/issues/226[#226]: (Breaking) Removed ClojureScript support for `Nashorn` and `GraalJS`.
** c.f. https://clojurescript.org/news/2020-04-24-release
// }}}

== 1.5.5 (2020-06-08)
// {{{
=== Changed
* Bump cider-nrepl to 0.25.2.
// }}}

== 1.5.4 (2020-06-05)
// {{{
=== Changed
* Bump cider-nrepl to 0.25.1.
// }}}

== 1.5.3 (2020-06-04)
// {{{
=== Changed
* Bump cider-nrepl to 0.25.0.
* Bump iced-nrepl to 1.0.2.
// }}}

== 1.5.2 (2020-05-26)
// {{{
=== Added
* Added support to launch babashka nREPL server.
** Added `g:iced#repl#babashka_repl_type` option.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/220[#220]: Fixed shadow-cljs dependency checking.
// }}}

== 1.5.1 (2020-05-19)
// {{{
=== Changed
* Bump kaocha-nrepl.

=== Fixed
* Fixed not to work one-line document when not connected.
// }}}

== 1.5.0 (2020-05-17)
// {{{
=== Changed
* Updated `IcedDocumentOpen` to use simple document by metadata when there is no `info` op.
* Bump kaocha.
* Bump piggieback.
// }}}

== 1.4.5 (2020-05-15)
// {{{
=== Fixed
* Fixed completion to work even if no candidate kind is returned.
// }}}

== 1.4.4 (2020-05-10)
// {{{
=== Fixed
* Fixed inner state initialization more.
// }}}

== 1.4.3 (2020-05-10)
// {{{
=== Added
* Added tip document for overwriting default key mappings.
** https://liquidz.github.io/vim-iced/#tips_overwriting_mappings

=== Changed
* Changed Socket REPL session to evaluate `require` / `in-ns` when `bufread` / `bufenter` autocmd is fired.
* Updated command palette to add run command to cmd history.
* Update vital.vim modules to be latest.
* Bump github ation workflows.

=== Fixed
* Fixed to initialize inner state when reconnecting.
** e.g. connect -> start cljs REPL -> quit cljs REPL outside vim -> connect
*** Since cljs session is left so far, we must initialize this state.
// }}}

== 1.4.2 (2020-04-24)
// {{{
=== Changed
* Changed auto connection to be able to select project when nREPL and shadow-cljs projects exists.

=== Fixed
* Fixed a code for default completion to work correctly in Socket REPL.
// }}}

== 1.4.1 (2020-04-18)
// {{{
=== Changed
* Bump iced-nrepl to 1.0.1.

=== Fixed
* Fixed virtual text to show correctly in nested namespaces in Socket REPL.

// }}}

== 1.4.0 (2020-04-14)
// {{{
=== Added

* Added `:IcedEvalAtMark` command.
* Added `:IcedEvalLastOuterTopList` command.
** Added `g:iced#eval#mark_at_last` option to specify which mark to use.
* Added `:IcedClearNsCache` command.
* Added `g:iced#nrepl#complete#ignore_context` option.

=== Changed

* Changed to cache the namespaces and its aliases for performance improvement.
** `:IcedClearNsCache` will clear this cache.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/202[#202]: Fixed completion to avoid unexpected behavior with https://github.com/neoclide/coc.nvim[coc.nvim].
** c.f. https://github.com/liquidz/vim-iced-coc-source/issues/1[vim-iced-coc-source#1]
// }}}

== 1.3.2 (2020-04-05)
// {{{
=== Fixed
* Fixed nREPL manipulation to support https://github.com/borkdude/babashka[babashka]'s nREPL.
// }}}

== 1.3.1 (2020-03-29)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/195[#195]: Fixed `boot repl` option to be able to launch REPL correctly.
// }}}

== 1.3.0 (2020-03-29)
// {{{
=== Added
* Added a support for sideloader in nREPL 0.7.0.

=== Changed
* Bump nREPL to 0.7.0.
* Bump zprint to 0.5.4.

=== Fixed
* Fixed buffer manipulation to ignore following autocmds also.
** `WinLeave`, `BufLeave`
// }}}

== 1.2.0 (2020-03-21)
// {{{
=== Added
* Added a support https://github.com/borkdude/babashka[Babashka] to launching by `IcedInstantConnect`.

=== Fixed
* Fixed `IcedAddMissing` and `IcedAddNs` commands not to time out.
* Fixed `IcedCycleSrcAndTest` command not to time out.
// }}}

== 1.1.1 (2020-03-15)
// {{{
=== Fixed

* https://github.com/liquidz/vim-iced/issues/191[#191]: Fixed `:IcedSourceShow` and `:IcedSourcePopupShow` to work correctly.
* Fixed nrepl testing not to show duplicated results.
* Fixed to unplace signs on other buffers correctly. (for testing mainly)
// }}}

== 1.1.0 (2020-03-12)
// {{{
=== Added

* Added code completion support for Socket REPL and pREPL.
** https://github.com/borkdude/babashka[Babashka]
** https://github.com/candid82/joker[Joker]
** https://github.com/anmonteiro/lumo[Lumo]
** https://github.com/planck-repl/planck[Planck]
// }}}

== 1.0.3 (2020-03-02)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/issues/187[#187]: Fixed to preserve alternative window during scrolling stdout buffer.
// }}}

== 1.0.2 (2020-03-01)
// {{{
=== Changed
* Bump refactor-nrepl to 2.5.0.
* Update `IcedExtractFunction` to show concrete message on error.

=== Fixed
* Fixed `IcedAddNs` to show ns alias candidate correctly in Vim.
* Fixed opening buffer / scrolling to bottom manipulation to ignore `WinEnter` and `BufEnter` autocmd.
// }}}

== 1.0.1 (2020-02-26)
// {{{
=== Fixed
* Fixed to connect to shadow-cljs REPL correctly.
// }}}

== 1.0.0 (2020-02-24)
// {{{
https://insideclojure.org/2020/02/18/lib-version/

=== Added
* Add support GraalVM powered code formatting tools.
** https://github.com/greglook/cljstyle[cljstyle]
** https://github.com/kkinnear/zprint[zprint]

=== Changed
* Bump cider-nrepl to 0.24.0.
* Bump jet to 0.0.12.
* Update vital.vim modules to be latest.

=== Fixed
* Fixed debugger to work with latest cider-nrepl.
* https://github.com/liquidz/vim-iced/issues/183[#183]: Fixed `:IcedTestNs` not to be "Interrupted" in Neovim.

// }}}

== 0.14.2 (2020-02-11)
// {{{
=== Added
* Add more tests for iced#nrepl#document#open.
* Add `iced#nrepl#op#iced#fetch_tapped_children` function.
* Add support for referring docstrings in Socket REPL.
* Add support for custom debugger.

=== Changed
* Bump iced-nrepl to 0.7.1.

=== Fixed
* Fixed `:IcedCleanNs` and `:IcedCleanAll` command to hold marks and the last visual range.
* Fix regexp for detecting Socket REPL prompt.
* Fix `eval_outer_top_list` for Socket REPL to be able to evaluate inside comment form.
// }}}

== 0.14.1 (2020-01-23)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/issues/179[#179]: Added environmental variable to overwrite Clojure CLI command.
** https://liquidz.github.io/vim-iced/#iced_command_advanced
* Added cheatshet.
** https://liquidz.github.io/vim-iced/#cheatsheet

=== Changed
* https://github.com/liquidz/vim-iced/issues/175[#175]: Changed `iced` command to use `clj` command for Clojure CLI project.
* https://github.com/liquidz/vim-iced/issues/176[#176]: Added a mention for `PlugInstall` to "Getting started" document page.
* https://github.com/liquidz/vim-iced/issues/177[#177]: Made `set hidden` option unnecessary.

=== Fixed
* https://github.com/liquidz/vim-iced/issues/174[#174]: Fixed to work `<Plug>(iced_eval_and_print)` correctly.
* https://github.com/liquidz/vim-iced/issues/178[#178]: Fixed `:IcedFormatAll` command to hold marks and the last visual range.
* Fixed virtual text position for Vim.
// }}}

== 0.14.0 (2020-01-14)
// {{{
=== Added
* Added document pages.
** https://liquidz.github.io/vim-iced/
** https://qiita.com/advent-calendar/2019/vim-iced
* Added minimal support for socket REPL and pREPL.
** https://liquidz.github.io/vim-iced/#socket_repl
* Added enhanced mode for `IcedSourceShow` command.
** Added `g:iced_enable_enhanced_definition_extraction` option.

=== Changed
* (Breaking) Rename following commands.
** `IcedPopupDocumentOpen` -> `IcedDocumentPopupOpen`
** `IcedPopupSourceShow` -> `IcedSourcePopupShow`

=== Fixed
* https://github.com/liquidz/vim-iced/issues/166[#166]: Fixed to show document protocol method correctly.
* https://github.com/liquidz/vim-iced/issues/168[#168]: Fixed a bug for adding resolved namespace.
* https://github.com/liquidz/vim-iced/issues/171[#171]: Fixed `IcedAddArity` not to break indents.
* https://github.com/liquidz/vim-iced/issues/172[#172]: Fixed `IcedFormat` and `IcedFormatAll` to work asynchronously.
* Fixed vim's popup window position when a window is thin.

// }}}

== 0.13.0 (2019-11-29)
// {{{
=== Added
* Add hook for `connected` event.
* Add `command` hook reporter to execute a command simply.
* Add `IcedInInitNs` instead of `IcedInReplNs`.
* Add `IcedUndefAllInNs` command.

=== Changed
* https://github.com/liquidz/vim-iced/issues/158[#158]: Clear test error sign only if the test passes.
* (Breaking) Required vim/neovim version is changed.
** Vim `8.1.0614` or later
** Neovim `0.4` or later
* Bump iced-nrepl to 0.7.0.
* (Breaking) Rename `IcedToggleSrcAndTest` command to `IcedCycleSrcAndTest`.
* (Breaking) Integrate `IcedListTapped` command to `IcedBrowseTapped`.
** `IcedListTapped` command is removed.
** If `IcedBrowseTapped` command is executed with no arguments, it works like `IcedListTapped`.
** Add default key map `<Leader>dbt` for `IcedBrowseTapped`.
** Change default key map `<Leader>dlt` for `IcedClearTapped`.
* Update to require ns automatically if the first ns-name on connecting REPL is not initial ns-name on REPL.

=== Fixed
* Fixed clearing virtual text to work correctly in neovim.
* Fixed not to clear quickfix when executing `IcedRequire` command.
* Fixed to work auto connection correctly on evaluation.

=== Removed
* (Breaking) https://github.com/liquidz/vim-iced/issues/159[#159]: Remove linting functionality.
* (Breaking) Remove `:IcedDefBack` command.
** You can use built-in https://vim-jp.org/vimdoc-en/tagsrch.html#CTRL-T[<C-t>] key mapping instead.
* (Breaking) Remove `:IcedInReplNs` command.
* (Breaking) Remove `eval-repl` hook kind.
// }}}

== 0.12.5 (2019-10-20)
// {{{
=== Added
* Add `g:iced#nrepl#path_translation` option.
** It is useful for translating paths in docker container.
** https://liquidz.github.io/vim-iced/vim-iced.html#vim-iced-install-docker

=== Fixed
* Fixed to process input-request from debugger correctly.
* Fixed a bug that candidates gradually decreased with vim-clap.
// }}}

== 0.12.4 (2019-10-12)
// {{{
=== Added
* Add `g:iced_enable_enhanced_cljs_completion` option.
* Add support for https://github.com/liuchengxu/vim-clap[vim-clap] as multiple candidates selector.
** Add `g:iced#clap#options` option.

=== Changed
* Bump cider-nrepl to 0.22.4.
* Bump iced-nrepl to 0.6.6.
* Update to show see-alsos in document lookup.

=== Fixed
* Fix to show exception error in test to error buffer.
// }}}

== 0.12.3 (2019-09-21)
// {{{
=== Added
* Add `g:iced#buffer#stdout#file_buffer_size` option.
* https://github.com/liquidz/vim-iced/pull/151[#151]: Add `g:iced#popup#neovim#winhighlight` option.
* https://github.com/liquidz/vim-iced/pull/151[#151]: Add `g:iced#popup#neovim#style` option.

=== Changed
* Make `iced#buffer#append` to scroll down asynchronously.
* Make `iced#buffer#stdout#append` to buffer lines for writing to `g:iced#buffer#stdout#file`.
* https://github.com/liquidz/vim-iced/pull/149[#149]: Make buffer initialization silently.
* Update `:IcedDocumentOpen` to check session validily.
// }}}

== 0.12.2 (2019-09-16)
// {{{
=== Fixed
* Fix to show test error correctly in neovim 0.4.0.
// }}}

== 0.12.1 (2019-09-14)
// {{{
=== Added
* Add `g:iced#buffer#stdout#max_line` option.
** This option is a limit of line count in stdout buffer.
* Add `g:iced#buffer#stdout#deleting_line_delay` option.
* Add operation to evaluate codes and tap its results.
** `<Plug>(iced_eval_and_tap)`
* Add `:IcedInterruptAll` command.
* Add `:IcedJackIn` command.
** Add `g:iced#nrepl#connect#jack_in_command` option.
*** This option enables you to customize jack-in command.

=== Changed
* Bump cider-nrepl to 0.22.3.
* Bump iced-nrepl to 0.6.4.

=== Fixed
* Fix to extract ns-name correctly.
** Previously it was not working well for ns form with metadata.
// }}}

== 0.12.0 (2019-09-07)
// {{{
=== Changed
* Bump cider-nrepl to 0.22.2.
* Bump iced-nrepl to 0.6.3.
* Make `:IcedGrep` async.
** Add `g:iced#grep#prg` option.
** Add `g:iced#grep#format` option.
* Change `IcedBrowseReferences` and `:IcedBrowseDependencies` to show results in quickfix.

=== Fixed
* Fix checking shadow-cljs dependency process.
* Fix to work `IcedTestUnderCursor` with neovim 0.4.0(nightly).
* Fix for rare reading bencode error.
* Fix browsing references/dependencies to work.
* Fix test error result to show file path correctly.

=== Removed
* (Breaking) Remove `g:iced#grep#target` option.
// }}}

== 0.11.3 (2019-08-27)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/pull/140[#140]: Add dependencies and middlewares validation for shadow-cljs.edn.
** vim-iced will validate shadow-cljs.edn when you start cljs REPL.

=== Fixed
* https://github.com/liquidz/vim-iced/pull/142[#142]: Fix jumping to all Clojure's Symbols.
// }}}

== 0.11.2 (2019-08-26)
// {{{
=== Changed
* Bump cider-nrepl to 0.22.0-beta12.
** Fix completion bugs with ClojureScript.
// }}}

== 0.11.1 (2019-08-24)
// {{{
=== Added
* Add `g:vim_iced_version` variable for detecting the vim-iced version from other plugins.
* Add `iced#complete#candidates` function to fetch completions.
* Add `:IcedToggleWarnOnReflection` command.
* Add `:IcedFormatAll` command.
* Add `:IcedCleanAll` command.
* Add `:IcedInstantConnect` command.
** Add `--instant` option to `iced repl` sub command.

=== Changed
* https://github.com/liquidz/vim-iced/pull/135[#135]: Update `:IcedDocumentOpen` to work with qualified symbols..

=== Fixed
* https://github.com/liquidz/vim-iced/pull/134[#134]: Fix to work with nvim 0.4.0(nightly).
* https://github.com/liquidz/vim-iced/pull/135[#135]: Fix `:IcedDocumentOpen` to work correctly.
* https://github.com/liquidz/vim-iced/pull/139[#139]: Fix jumping to var that includes single quote.
* Fix to show documents for special forms such as `try`.
* Fix to hide virtual text if the last one has same position.

// }}}

== 0.11.0 (2019-08-03)
// {{{
=== Added
* Add support vim8's popup window.
** https://github.com/vim/vim/blob/master/runtime/doc/popup.txt
** Enables virtual text for evaluation and floating window for debugging.
** Add `g:iced_enable_popup_document` option.
** Add `g:iced_enable_auto_document` option.
** Add `g:iced_max_distance_for_auto_document` option.
*** Enables full/one-line document on popup/floating window.
** Add `IcedPopupDocumentOpen` command.
** Add `IcedPopupSourceShow` command.
* Add support cross references
** Add `IcedBrowseReferences` command.
** Add `IcedBrowseDependencies` command.
** Add `IcedBrowseVarDependencies` command.
** Add `IcedUseCaseOpen` command.
* Enhance spec supports
** Add `IcedSpecForm` command.
** Add `IcedSpecExample` command.
* Support debugging tapped value.
** Add `IcedListTapped` command.
** Add `IcedClearTapped` command.
** Add `IcedBrowseTapped` command.
* Integrate with ClojureDocs.
** Add `IcedClojureDocsOpen` command.
** Add `IcedClojureDocsRefresh` command.
** Add `g:iced#clojuredocs#export_edn_url` option.
* Misc
** Add `IcedOpenNs` command.
** Add `--with-kaocha` option to `iced` command.

=== Changed
* Bump cider-nrepl to 0.22.0-beta9.
* Bump piggieback to 0.4.1.
* Bump https://github.com/liquidz/iced-nrepl[iced-nrepl] to 0.6.0.
* Update vital.vim to latest.
* Update `:IcedToggleSrcAndTest` to confirm opening a new file with a pseudo path if the file does not exist.
* (BREAKING) Rename `g:iced#buffer#floating#time` to `g:iced#popup#time`.
* (BREAKING) Rename `g:iced#nrepl#sync#timeout_ms` to `g:iced#promise#timeout_ms`.
** Add `cider.nrepl/wrap-xref` to required middlewares.
* (BREAKING) Change default `K` mapping to `IcedPopupDocumentOpen` command.
* (BREAKING) Change default `<Leader>hs` mapping to `IcedPopupSourceShow` command.
** Until now it was `IcedDocumentOpen` command.
* (BREAKING) Commands/Key mappings maintenance.

[title="Commands"]
|===
| Before | After
| IcedGotoLet | IcedJumpToLet
| IcedRelatedNamespace | IcedBrowseRelatedNamespace
| IcedFindVarReferences | IcedBrowseVarReferences
|===

[title="Key mappings"]
|===
| Before | After
| <Plug>(iced_related_namespace) | <Plug>(iced_browse_related_namespace)
| <Plug>(iced_goto_let) | <Plug>(iced_jump_to_let)
| <Plug>(iced_find_var_references) | <Plug>(iced_browse_var_references)
|===

[title="Default keys"]
|===
| Mapping | Before | After
| <Plug>(iced_browse_related_namespace) | <Leader>br | <Leader>bn
| <Plug>(iced_jump_to_let) | <Leader>gl | <Leader>jl
| <Plug>(iced_browse_references) | <Leader>fr | <Leader>br
|===

=== Fixed
* Fix floating window position on split windows.

=== Removed
* (BREAKING) Remove `IcedFindVarReferences!` command.
* (BREAKING) Remove `g:iced#var_references#cache_dir` option.
* Remove `iced#nrepl#op#iced#find_var_references` function.
* (BREAKING) Remove `IcedGrimoireOpen` command.
** Sadly grimoire is deprecated...
*** https://twitter.com/arrdem/status/1144065851370299392
*** Use `:IcedClojureDocsOpen` instead.
// }}}

== 0.10.5 (2019-06-19)
// {{{
=== Fixed
* https://github.com/liquidz/vim-iced/pull/128[#128]: Fix `:IcedStartCljsRepl shadow-cljs` not to hang with shadow-cljs.
// }}}

== 0.10.4 (2019-05-14)
// {{{
=== Added
* Add `--without-cljs` option to `iced` command.
* Add `--dependencies` option to `iced` command.
* Add `--middleware` option to `iced` command.
* Add `g:iced#format#does_overwrite_rules` option.
* Add CI config for neovim testing.
** Support neovim officially from this version!
* Add operation to evaluate codes and print its results.
** `<Plug>(iced_eval_and_print)`

=== Changed
* Bump https://github.com/liquidz/iced-nrepl[iced-nrepl] to 0.4.3.

=== Fixed
* https://github.com/liquidz/vim-iced/pull/117[#117]: Fix to detect channel disconnection on neovim.
* Fix grimoire fetching error with OpenJDK 11.
** See https://github.com/http-kit/http-kit/issues/388
* Fix to work `in-ns` on reading buffer without moving window.
// }}}

== 0.10.3 (2019-03-25)
// {{{
=== Added
* Add some extra documents.
** https://liquidz.github.io/vim-iced/vim-iced.html

=== Changed
* https://github.com/liquidz/vim-iced/pull/110[#110]: Change `:IcedDocumentOpen` not to move focus if document buffer is already opened.

=== Fixed
* Fix arguments for `nvim_open_win`
** Neovim's https://github.com/neovim/neovim/commit/27c4b6b9bd90fbc3a41945f87ec944bd0ced8228#diff-49e08ed0add04457bc8a43c962736f13L628[API] has changed.
* https://github.com/liquidz/vim-iced/pull/105[#105]: Fix shadow-cljs build-id to trim the beginning colon
* https://github.com/liquidz/vim-iced/pull/107[#107]: Fix iced command to render color correctly
// }}}

== 0.10.2 (2019-03-10)
// {{{
=== Added
* https://github.com/liquidz/vim-iced/pull/96[#96]: Add floating window support for neovim.
** You need nightly build(0.4.0) currently.
* Add github pages for help file.
** https://liquidz.github.io/vim-iced/vim-iced.html
** powered by https://github.com/liquidz/clj-vimhelp[clj-vimhelp].

=== Fixed
* https://github.com/liquidz/vim-iced/pull/101[#101]: Fix not to evaluate `in-ns` while appending lines to stdout buffer.
// }}}

== 0.10.1 (2019-03-05)
// {{{
=== Added
* Add http://shadow-cljs.org[shadow-cljs] as a CLJS environment.
** Now you can start CLJS REPL via `:IcedStartCljsRepl shadow-cljs {build-id}`.
** WARNING: `iced` command does not support shadow-cljs yet.
* Add neovim virtual text support.
** Evaluation result and lint warning messages are shown as virtual text.
** WARNING: Neovim only
* Add `g:iced#lint#use_virtual_text` option.
** WARNING: Neovim only
* https://github.com/liquidz/vim-iced/pull/87[#87]: Add `:IcedEvalVisual` and `:IcedEvalReplVisual` commands to evaluate selected forms.
* https://github.com/liquidz/vim-iced/issues/99[#99]: Add `--force-boot` and `--force-clojure-cli` options to `iced` command.

=== Changed
* Update `:IcedEval` not to evaluate `ns` form every evaluation.
** This leads to evaluation performance improvement for CLJS codes.
* Update not to switch session unnecessarily at cljs repl startup.
* Update echoing eval result to shorten

=== Fixed
* Fix a bug that `:IcedDefJump` fails for protocol fns.
* Fix a type checking bug in testing.
// }}}

== 0.10.0 (2019-02-19)
// {{{
=== Added
* Add support for https://github.com/bhauman/figwheel-main[figwheel-main].
* Add `:IcedCljsRepl` command for general use of starting CLJS REPL.
* Add `:IcedCycleSession` command for cycling clj/cljs session.
* Add `g:iced#nrepl#auto#does_switch_session` option for switching CLJ/CLJS session automatically.

=== Changed
* (Breaking) Rename `figwheel` CLJS environment to `figwheel-sidecar`.
* Bump nrepl to 0.6.0.
* Bump cider-nrepl to 0.21.1.
* Bump piggieback to 0.4.0.
* (Breaking) Change to require neovim 0.3.2 or later.
* Change status text to clarify CLJ/CLJS session status.

=== Removed
* (Breaking) Remove `iced#nrepl#cljs#custom` option.
** Instead of this option, `:IcedCljsRepl` command is added.

=== Fixed
* Fix a bug that response to difference IDs cannot be processed correctly.
// }}}

== 0.9.3 (2019-01-30)
// {{{
=== Added
* Add hooking feature.
** See details `:h vim-iced-customizing-hooks`

=== Changed
* Bump iced-nrepl to 0.4.1.
* https://github.com/liquidz/vim-iced/pull/85[#85]: Update sample code for debugging to work correctly.

=== Removed
* Remove `g:iced#lint#message_max_length` option. (https://github.com/liquidz/vim-iced/pull/79[#79])

=== Fixed
* https://github.com/liquidz/vim-iced/pull/79[#79]: Fix to prevent "Press ENTER" prompt on `one_line_doc` and `lint` message.
* Fix bug when completing on new file.
* Fix bug when slurping on new file.
* Fix to apply skeleton without `clojure.data.json` correctly.
// }}}

== 0.9.2 (2019-01-15)
// {{{
=== Changed
* https://github.com/liquidz/vim-iced/pull/72[#72]: Update `IcedDefJump` to enable jump into JAR file.
* https://github.com/liquidz/vim-iced/pull/73[#73]: Update `iced` command to `piggieback` as an option.
** `iced` command will detect use of CLJS automatically, so you won't need to specify this option basically.
* https://github.com/liquidz/vim-iced/pull/74[#74]: Update `:IcedReconnect` to work if a connection is not already established.
* Bump iced-nrepl to 0.4.0.

=== Fixed
* https://github.com/liquidz/vim-iced/pull/75[#75]: Fix `E158` error on testing.
* https://github.com/liquidz/vim-iced/pull/77[#77]: Fix running tests to work correctly in any namespaces.
* https://github.com/liquidz/vim-iced/pull/78[#78]: Fix a bug on processing `info` op response from nREPL.
* Fix to reset indentation rules when `:IcedReconnect` is executed.
// }}}

== 0.9.1 (2019-01-01)
// {{{
=== Changed
* Bump cider-nrepl to 0.19.0.
// }}}

== 0.9.0 (2018-12-27)
// {{{
=== Added
* Add `g:iced#lint#message_max_length` option.

=== Changed
* Bump iced-nrepl to 0.3.0.
** Isolate iced-nrepl depending on libraries by https://github.com/benedekfazekas/mranderson[mranderson].
* Improve switching signs process performance.
** `iced#sign#unplace#_by_name` is updated.

=== Fixed
* Fix auto-indent for `defrecord`.
* Fix to show eastwood's warnings correctly.
** iced-nrepl was failed to detect some type of warnings.
* Fix not to throw exception when `:wq` is executed.
** Make linting delay to working.
// }}}

== 0.8.7 (2018-12-20)
// {{{
=== Added
* Add `g:iced_sign` variable to customize signs.

=== Changed
* Bump nrepl to 0.5.3

=== Fixed
* #64 Fix to work auto-indent with EDN file.
* Fix to work auto-indent after moving buffer or window.
* Fix to clear error sign before running `:IcedTestRerunLast`.
* Fix `:IcedTestRerunLast` to work with any test patterns.
* #65 Fix redrawing glitches for neovim 0.3.2-dev
** This is a workaround for https://github.com/neovim/neovim/issues/7756[neovim's #7756].
* #66 Fix to work auto-indent for string literal.
// }}}

== 0.8.6 (2018-12-11)
// {{{
=== Added
* Add `:IcedFindVarReferences` command.
* Support auto indentation.

=== Changed
* Bump nrepl to 0.5.2
* Bump iced-nrepl to 0.2.11

=== Fixed
* Fix error in debugging if the file is not saved.
** Fix not to execute `:edit` file in debugging if the file is already opened.
* Fix evaluation status not to display "evaluating" for initializing debugger.
// }}}

== 0.8.5 (2018-12-05)
// {{{
=== Changed
* Bump nrepl to 0.5.1
* Bump iced-nrepl to 0.2.8

=== Fixed
* Fix to warn if there are no test vars on testing from source.
* Fix to warn if there are no test_vars on browsing tests.
* Fix to unplace corresponding signs when linting and testing.
* Fix starting trace process to unplace sign if the sign already exists.
// }}}

== 0.8.4 (2018-11-28)
// {{{
=== Added
* Allow to connect shadow-cljs's nREPL server as ClojureScript session.

=== Changed
* Bump iced-nrepl to 0.2.6
* Update `:IcedRelatedNamespace` command not to load all namespace at first.

=== Fixed
* Fix completion bug immediately after nREPL connection.
// }}}

== 0.8.3 (2018-11-20)
// {{{
=== Added
* Allowed to run tests on source code.
** In the test namespace corresponding to the current namespace, tests including name of function under the cursor are the target.
* Added `:IcedBrowseTestUnderCursor` command.

=== Changed
* Update not to display "evaluating" on status line during linter check.

=== Fixed
* Fix `iced#eval_and_read` to work correctly.
** Code skeleton sometimes failed.
* Fix `:IcedTestNs` to work correctly.
** In source code, "Not found" error is shown before evaluating some codes.
// }}}

== 0.8.2 (2018-11-15)
// {{{
=== Changed

* Update to load all ns before browsing related ns only for the first time.
* Bump cider-nrepl to 0.19.0-SNAPSHOT
** Update `ns-aliases` op in cider-nrepl to fetch namespace aliases.

=== Fixed
* #55: Fix not to expand macro in IcedThreadFirst/Last command.
** via https://github.com/liquidz/iced-nrepl/commit/de329da8c0f7cffb8fdbd20b6baec581ba15ae76[iced-nrepl]
* Fix not to expand vector in IcedThreadFirst/Last command.
** Same above
* Fix to handle not-found error on jumping to definition
// }}}

== 0.8.1 (2018-11-08)
// {{{
=== Added
* Add option to restrict value length in debugging.
** `g:iced#debug#value_max_length`
* Add option for `:IcedRelatedNamespace` command.
** `g:iced#related_ns#tail_patterns`
*** The namespace tailing pattern to decide the namespace is related or not.
* Add clojurescript environment for https://github.com/graalvm/graaljs[GraalJS]

=== Changed
* Update referencing document to show with vim's `help` format.
* Update testing process to use `test-var-query` op instead of `test`/`test-all` op in cider-nrepl.
** `test` and `test-all` ops are already deprecated.
*** https://github.com/clojure-emacs/cider-nrepl/blob/master/CHANGELOG.md#0170-2018-05-07
* Update to connect nREPL automatically when starting `cljs-repl`.

=== Fixed
* Fix bug for echoing document for Java class constructor under cursor.
// }}}

== 0.8.0 (2018-11-07)
// {{{
=== Added
* Add option for updating document buffer with current form document.
** `g:iced#buffer#document#does_update_automatically`

=== Changed
* Update to use nrepl.cmdline to launch nREPL server for Clojure CLI instead of cider-nrepl.main
* *BREAKING*: Change not to update document buffer with current form document when document buffer is visible.
** You can change this behavior with `g:iced#buffer#document#does_update_automatically` option.

=== Removed
* `g:iced#eastwood#linters` option

=== Fixed
* Fix to work document/grimoire reference before evaluation.
* Fix `iced#sign` to check file existence before placing it.
* Update `iced#nrepl#system` to evaluate with fully qualified name.
  * ex) error occured when custom `let` is defined.
* Update test commands to check nREPL connection before running.
// }}}

== 0.7.3 (2018-10-31)
// {{{
=== Added
* Add `g:iced#eastwood#option` which allows to set `exclude-linters`
=== Changed
* Bump iced-nrepl version to 0.2.3

=== Deprecated
* `g:iced#eastwood#linters` option

=== Fixed
* Fix `iced#nrepl#auto#bufread` to check session validity
// }}}

== 0.7.2 (2018-10-29)
// {{{
=== Added
* Add codecov badge
** for measuring code coverage
* Add test codes
** `iced#complete`, `iced#sign`

=== Fixed
* Fix not to split window permanently when debugging
// }}}

== 0.7.1 (2018-10-25)
// {{{
* Fix jumping to definition not to jump into JAR file
* Refactor codes
// }}}

== 0.7.0 (2018-10-23)
// {{{
* Update to support Clojure 1.10's error message format
* Update to work with Clojure 1.8
** via updating https://github.com/liquidz/iced-nrepl/commit/3837d103454586d81f36130defa9daf1575adcb5[iced-nrepl]
* Bump orchard version to 0.3.3
* Refactor codes

=== Breaking changes
* Update `:IcedCleanNs` command not to rewrite prefix
** Add `g:iced#refactor#prefix_rewriting` option to change behavior. (default value is 'v:false')
* Rename options

|===
| before | after
| g:iced#nrepl#cljs#default_env | g:iced#cljs#default_env
| g:iced#nrepl#cljs#custom#start_code | g:iced#cljs#custom#start_code
| g:iced#nrepl#cljs#custom#stop_code | g:iced#cljs#custom#stop_code
| g:iced#nrepl#eval#inside_comment | g:iced#eval#inside_comment
| g:iced#nrepl#ns#refactor#favorites | g:iced#ns#favorites
| g:iced#nrepl#op#cider#debug#print_length | g:iced#debug#print_length
| g:iced#nrepl#op#cider#debug#print_level | g:iced#debug#print_level
| g:iced#nrepl#test#spec_num_tests | g:iced#test#spec_num_tests
| g:iced#palette#palette | g:iced#palette
| g:iced#lint#linters | g:iced#eastwood#linters
|===
// }}}

== 0.6.2 (2018-10-19)
// {{{
* Fix not to remove blank lines too much in code formatting #49
* Update to interrupt when disconnecting
* Update to make spec document more readable
// }}}

== 0.6.1 (2018-10-19)
// {{{
* Fix to work skeleton correctly #47
* Fix "Argument to in-ns must be a symbol" error by `IcedInReplNs` command #46
* Support junegunn/fzf as a selector
** https://github.com/junegunn/fzf
* Update `iced` command to allow `with-profile` option for leiningen
// }}}

== 0.6.0 (2018-10-17)
// {{{
* Fix code formatting to delete extra empty line
* Fix a bug causes evaluation error on stdout buffer
* Update to check `set hidden` when connecting to nrepl
* Fix a bug causes vim error when closing stdout/repl buffer
* Update completion to display correct document in preview window

=== Breaking changes
* Delete `:IcedBrowseFunction` command
** Extracted to https://github.com/liquidz/vim-iced-project-namespaces
* Delete `:IcedBrowseNamespace` command
** Extracted to https://github.com/liquidz/vim-iced-function-list
// }}}

== 0.5.5 (2018-10-13)
// {{{
* Update linting not to run when linting is already running
* Update to clear signs when linting is disabled
* Update to refresh signs when code is formatted
* Add python3 code to boost decoding bencode
* Fix decoding bencode in vim script to work(detect error) with incorrect character
* Fix setting sign to ignore errors that has no line number
// }}}

== 0.5.4 (2018-10-10)
// {{{
* Fixed `IcedPrintLast` to output all results
* Fixed a bug that caused an error if javadoc result did not have a `member` key
* Add `clojure.spec.test.alpha` as ns favorites for `IcedAddNs`
* Add `IcedTestSpecCheck` command
// }}}

== 0.5.3 (2018-10-09)
// {{{
* Fix to use `sockconnect` for nREPL connection #40
* Update debugging highlighting to specify background color
* Update to reload all namespaces before running all tests
* Add `IcedRelatedNamespaces` command
// }}}

== 0.5.2 (2018-10-06)
// {{{
* Update code formatting to specify `alias-map` for cljfmt
* Tweak codes
// }}}

== 0.5.1 (2018-10-05)
// {{{
* Update to show evaluation error when it is clear that current session is invalid from the extension
* Update to be able to define custom command in the command palette
// }}}

== 0.5.0 (2018-10-03)
// {{{
* Fix to work completion on the stdout buffer correctly
** https://github.com/liquidz/iced-nrepl/commit/15697d35f6407a1d86d1a9bce68341792a41cbbc
* Update to execute corresponding test codes even if test-ns is executed on the src side
* Add `IcedTestRerunLast` command
* Support neovim EXPERIMENTALLY
// }}}
